'use strict';Object.defineProperty(exports,'__esModule',{value:true});var react=require('react'),react$1=require('@ai-sdk/react'),ai=require('ai'),jsxRuntime=require('react/jsx-runtime');var Pe={name:"midnight",primary:"#6366f1",primaryHover:"#4f46e5",background:"#0f172a",surface:"#1e293b",surfaceHover:"#334155",text:"#f1f5f9",textSecondary:"#94a3b8",border:"#334155",userBubble:"#6366f1",userBubbleText:"#ffffff",assistantBubble:"#1e293b",assistantBubbleText:"#f1f5f9",error:"#ef4444",errorBg:"#450a0a"},ot={name:"ocean",primary:"#0ea5e9",primaryHover:"#0284c7",background:"#0c1222",surface:"#172033",surfaceHover:"#1e3a5f",text:"#e0f2fe",textSecondary:"#7dd3fc",border:"#1e3a5f",userBubble:"#0ea5e9",userBubbleText:"#ffffff",assistantBubble:"#172033",assistantBubbleText:"#e0f2fe",error:"#f87171",errorBg:"#450a0a"},nt={name:"forest",primary:"#22c55e",primaryHover:"#16a34a",background:"#052e16",surface:"#14532d",surfaceHover:"#166534",text:"#dcfce7",textSecondary:"#86efac",border:"#166534",userBubble:"#22c55e",userBubbleText:"#052e16",assistantBubble:"#14532d",assistantBubbleText:"#dcfce7",error:"#f87171",errorBg:"#450a0a"},st={name:"sunset",primary:"#f97316",primaryHover:"#ea580c",background:"#1c1917",surface:"#292524",surfaceHover:"#44403c",text:"#fafaf9",textSecondary:"#d6d3d1",border:"#44403c",userBubble:"#f97316",userBubbleText:"#ffffff",assistantBubble:"#292524",assistantBubbleText:"#fafaf9",error:"#f87171",errorBg:"#450a0a"},it={name:"lavender",primary:"#a855f7",primaryHover:"#9333ea",background:"#1a0a2e",surface:"#2d1b4e",surfaceHover:"#3b2d5c",text:"#f3e8ff",textSecondary:"#d8b4fe",border:"#3b2d5c",userBubble:"#a855f7",userBubbleText:"#ffffff",assistantBubble:"#2d1b4e",assistantBubbleText:"#f3e8ff",error:"#f87171",errorBg:"#450a0a"},V={midnight:Pe,ocean:ot,forest:nt,sunset:st,lavender:it},q=Pe;function at(e){return typeof e=="string"&&e in V}function G(e){if(!e)return {...q,name:q.name};if(at(e)){let r=V[e];return {...r,name:r.name}}let t=e;return {name:"custom",primary:t.primary,primaryHover:t.primaryHover??pe(t.primary,-15),background:t.background,surface:t.surface,surfaceHover:t.surfaceHover??pe(t.surface,10),text:t.text,textSecondary:t.textSecondary??pe(t.text,-30),border:t.border??t.surface,userBubble:t.userBubble??t.primary,userBubbleText:t.userBubbleText??"#ffffff",assistantBubble:t.assistantBubble??t.surface,assistantBubbleText:t.assistantBubbleText??t.text,error:t.error??"#ef4444",errorBg:t.errorBg??"#450a0a"}}function pe(e,t){let r=e.replace(/^#/,""),o=parseInt(r,16),i=(o>>16)+t,l=(o>>8&255)+t,n=(o&255)+t;return i=Math.max(0,Math.min(255,i)),l=Math.max(0,Math.min(255,l)),n=Math.max(0,Math.min(255,n)),`#${(i<<16|l<<8|n).toString(16).padStart(6,"0")}`}var Me={title:"Chat Assistant",placeholder:"Type your message...",send:"Send message",close:"Close chat",open:"Open chat",thinking:"Thinking",error:"Something went wrong. Please try again.",retry:"Retry",suggestionsTitle:"Suggested questions",restart:"Restart chat"};var Be={title:"Asistente de Chat",placeholder:"Escribe tu mensaje...",send:"Enviar mensaje",close:"Cerrar chat",open:"Abrir chat",thinking:"Pensando",error:"Algo sali\xF3 mal. Por favor, intenta de nuevo.",retry:"Reintentar",suggestionsTitle:"Preguntas sugeridas",restart:"Reiniciar chat"};var Z={en:Me,es:Be};function lt(e){return e in Z}function Le(e){return lt(e)?Z[e]:Z.en}function me(e,t){let r=Le(e);return t?{...r,...t}:r}function J({size:e=24,style:t}){return jsxRuntime.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:t,children:jsxRuntime.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}function $({size:e=24,style:t}){return jsxRuntime.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:t,children:[jsxRuntime.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),jsxRuntime.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}function Q({size:e=18,style:t}){return jsxRuntime.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:t,children:[jsxRuntime.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),jsxRuntime.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})}function ze({size:e=18,style:t}){return jsxRuntime.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:t,children:[jsxRuntime.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),jsxRuntime.jsx("path",{d:"M3 3v5h5"})]})}function ee({theme:e,position:t,isOpen:r,onClick:o,openLabel:i,closeLabel:l,zIndex:n,openIcon:c,closeIcon:m}){let u={position:"fixed",bottom:"1rem",...t==="bottom-left"?{left:"1rem",right:"auto"}:{right:"1rem",left:"auto"},zIndex:n,display:"flex",height:"3.5rem",width:"3.5rem",alignItems:"center",justifyContent:"center",borderRadius:"50%",backgroundColor:e.primary,color:"#ffffff",border:"none",cursor:"pointer",boxShadow:`0 4px 20px ${e.primary}66`,transition:"all 0.2s"};return jsxRuntime.jsx("button",{onClick:o,"aria-label":r?l:i,"aria-expanded":r,style:u,onMouseEnter:d=>{d.currentTarget.style.transform="scale(1.05)",d.currentTarget.style.backgroundColor=e.primaryHover,d.currentTarget.style.boxShadow=`0 6px 24px ${e.primary}80`;},onMouseLeave:d=>{d.currentTarget.style.transform="scale(1)",d.currentTarget.style.backgroundColor=e.primary,d.currentTarget.style.boxShadow=`0 4px 20px ${e.primary}66`;},children:r?m??jsxRuntime.jsx($,{}):c??jsxRuntime.jsx(J,{})})}function ct(e){return typeof e=="object"&&e!==null&&"type"in e&&e.type==="text"&&"text"in e&&typeof e.text=="string"}function he(e){return !e.parts||e.parts.length===0?"":e.parts.filter(ct).map(t=>t.text).join("")}function te({suggestions:e,onSelect:t,theme:r,title:o}){let[i,l]=react.useState(null);if(!e?.length)return null;let n={marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},c={fontSize:"0.75rem",color:r.textSecondary,marginBottom:"0.25rem"},m=s=>({padding:"0.5rem 0.75rem",fontSize:"0.875rem",backgroundColor:s?r.primary:r.surface,color:s?"#ffffff":r.text,border:`1px solid ${s?r.primary:r.border}`,borderRadius:"0.5rem",cursor:"pointer",textAlign:"left",transition:"all 0.2s",fontFamily:"inherit"});return jsxRuntime.jsxs("div",{style:n,children:[jsxRuntime.jsx("span",{style:c,children:o}),e.slice(0,3).map((s,u)=>jsxRuntime.jsx("button",{type:"button",style:m(i===u),onClick:()=>t(s),onMouseEnter:()=>l(u),onMouseLeave:()=>l(null),children:s},u))]})}var bt=react.lazy(()=>import('react-markdown').catch(e=>(console.error("[ai-chat-widget] Failed to load react-markdown:",e),{default:({children:t})=>jsxRuntime.jsx("span",{children:t})}))),be=class extends react.Component{constructor(t){super(t),this.state={hasError:false};}static getDerivedStateFromError(){return {hasError:true}}render(){return this.state.hasError?jsxRuntime.jsx("span",{children:this.props.fallback}):this.props.children}};function re({message:e,theme:t,showSuggestions:r=true,isLastAssistantMessage:o=false,suggestionsTitle:i="Suggested questions",onSuggestionSelect:l}){let[n,c]=react.useState(null),m=he(e),s=e.role==="user";if(react.useEffect(()=>{!s&&!n&&import('remark-gfm').then(f=>{c(()=>f.default);}).catch(f=>{console.error("[ai-chat-widget] Failed to load remark-gfm:",f);});},[s,n]),!m)return null;let u=!s&&r&&o&&l?e.parts?.find(f=>f.type==="data-suggestions")?.data??[]:[],d={maxWidth:"85%",borderRadius:"1rem",padding:"0.5rem 1rem",backgroundColor:s?t.userBubble:t.assistantBubble,color:s?t.userBubbleText:t.assistantBubbleText};return jsxRuntime.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:s?"flex-end":"flex-start"},children:[jsxRuntime.jsx("div",{style:d,children:s?jsxRuntime.jsx("p",{style:{fontSize:"0.875rem",margin:0},children:m}):jsxRuntime.jsx("div",{style:{fontSize:"0.875rem",lineHeight:1.5},className:"ai-chat-markdown",children:jsxRuntime.jsx(be,{fallback:m,children:jsxRuntime.jsx(react.Suspense,{fallback:jsxRuntime.jsx("span",{children:m}),children:jsxRuntime.jsx(bt,{remarkPlugins:n?[n]:[],children:m})})})})}),u.length>0&&l&&jsxRuntime.jsx(te,{suggestions:u,onSelect:l,theme:t,title:i})]})}function ne({theme:e,text:t}){let r={height:"0.5rem",width:"0.5rem",borderRadius:"50%",backgroundColor:e.primary};return jsxRuntime.jsx("div",{style:{display:"flex",justifyContent:"flex-start"},children:jsxRuntime.jsx("div",{style:{borderRadius:"1rem",backgroundColor:e.assistantBubble,padding:"0.5rem 1rem",color:e.assistantBubbleText},children:jsxRuntime.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[jsxRuntime.jsx("div",{style:{display:"flex",gap:"0.25rem"},children:[0,1,2].map(o=>jsxRuntime.jsx("span",{style:{...r,animation:"ai-chat-bounce 1s infinite",animationDelay:`${ -0.3+o*.15}s`}},o))}),jsxRuntime.jsxs("span",{style:{fontSize:"0.875rem",color:e.textSecondary},children:[t,"..."]})]})})})}function se({theme:e,errorText:t,retryText:r,onRetry:o}){return jsxRuntime.jsx("div",{style:{display:"flex",justifyContent:"flex-start"},children:jsxRuntime.jsxs("div",{style:{borderRadius:"1rem",backgroundColor:e.errorBg,padding:"0.5rem 1rem",color:e.error},children:[jsxRuntime.jsx("p",{style:{fontSize:"0.875rem",margin:0},children:t}),jsxRuntime.jsx("button",{onClick:o,style:{marginTop:"0.25rem",fontSize:"0.875rem",fontWeight:500,color:e.error,textDecoration:"underline",background:"none",border:"none",cursor:"pointer",padding:0},children:r})]})})}function ae({theme:e,value:t,onChange:r,onSubmit:o,placeholder:i,sendLabel:l,isLoading:n,autoFocus:c}){let m=react.useRef(null);react.useEffect(()=>{c&&m.current?.focus();},[c]);let s=a=>{a.preventDefault(),!(!t.trim()||n)&&o();},u={flex:1,borderRadius:"9999px",border:`1px solid ${e.border}`,backgroundColor:e.surface,padding:"0.5rem 1rem",fontSize:"0.875rem",color:e.text,outline:"none",transition:"all 0.2s",opacity:n?.5:1},d={display:"flex",height:"2.5rem",width:"2.5rem",alignItems:"center",justifyContent:"center",borderRadius:"50%",backgroundColor:e.primary,color:"#ffffff",border:"none",cursor:n||!t.trim()?"not-allowed":"pointer",opacity:n||!t.trim()?.5:1,transition:"all 0.2s"};return jsxRuntime.jsx("form",{onSubmit:s,style:{borderTop:`1px solid ${e.border}`,backgroundColor:e.surface,padding:"1rem"},children:jsxRuntime.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[jsxRuntime.jsx("input",{ref:m,type:"text",value:t,onChange:a=>r(a.target.value),placeholder:i,disabled:n,style:u,onFocus:a=>{a.currentTarget.style.borderColor=e.primary,a.currentTarget.style.boxShadow=`0 0 0 2px ${e.primary}33`;},onBlur:a=>{a.currentTarget.style.borderColor=e.border,a.currentTarget.style.boxShadow="none";}}),jsxRuntime.jsx("button",{type:"submit",disabled:n||!t.trim(),"aria-label":l,style:d,onMouseEnter:a=>{!n&&t.trim()&&(a.currentTarget.style.backgroundColor=e.primaryHover);},onMouseLeave:a=>{a.currentTarget.style.backgroundColor=e.primary;},children:jsxRuntime.jsx(Q,{})})]})})}function Ne(e,t){let r=react.useRef(null),o=react.useRef(e),i=react.useCallback(()=>{r.current?.scrollIntoView({behavior:"smooth"});},[]);return react.useEffect(()=>{let l=e>o.current;o.current=e,(l||t)&&i();},[e,t,i]),{ref:r,scrollToBottom:i}}var kt={position:"absolute",width:16,height:16,zIndex:10,background:"transparent"},Rt=[{corner:"nw",style:{top:0,left:0},cursor:"nwse-resize"},{corner:"ne",style:{top:0,right:0},cursor:"nesw-resize"},{corner:"sw",style:{bottom:0,left:0},cursor:"nesw-resize"},{corner:"se",style:{bottom:0,right:0},cursor:"nwse-resize"}];function xe({onResizeStart:e,isResizing:t}){return jsxRuntime.jsx(jsxRuntime.Fragment,{children:Rt.map(({corner:r,style:o,cursor:i})=>jsxRuntime.jsx("div",{"aria-hidden":"true",style:{...kt,...o,cursor:i},onMouseDown:l=>e(r,l)},r))})}function le({theme:e,position:t,messages:r,input:o,onInputChange:i,onSubmit:l,onRetry:n,onClose:c,onRestart:m,onSuggestionSelect:s,isLoading:u,error:d,labels:a,title:f,headerIcon:C,placeholder:g,width:y,height:R,zIndex:L,showSuggestions:M,isClosing:I=false,resizable:T,isMobile:h,isResizing:w,onResizeStart:v}){let{ref:x}=Ne(r.length,u),S=r.reduceRight((p,D,de)=>p===-1&&D.role==="assistant"?de:p,-1),N={position:"fixed",bottom:"6rem",...t==="bottom-left"?{left:"1rem",right:"auto"}:{right:"1rem",left:"auto"},zIndex:L,display:"flex",height:h?"calc(100vh - 7rem)":`${R}px`,width:h?"calc(100vw - 1rem)":`${y}px`,maxWidth:"calc(100vw - 2rem)",flexDirection:"column",overflow:"hidden",borderRadius:"1rem",border:`1px solid ${e.border}`,backgroundColor:e.background,boxShadow:`0 8px 32px ${e.primary}40`,transition:w?"none":"width 0.1s ease-out, height 0.1s ease-out"},F={display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${e.border}`,background:`linear-gradient(to right, ${e.primary}, ${e.primaryHover})`,padding:"0.75rem 1rem"},O=I?"ai-chat-window-closing":"ai-chat-window-opening";return jsxRuntime.jsxs("div",{role:"dialog","aria-modal":"true","aria-labelledby":f?"ai-chat-title":void 0,"aria-label":f?void 0:a.title,className:O,style:N,children:[jsxRuntime.jsxs("div",{style:F,children:[jsxRuntime.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1,minWidth:0},children:[C&&jsxRuntime.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",flexShrink:0},children:typeof C=="string"?jsxRuntime.jsx("span",{style:{fontSize:"1.25rem",lineHeight:1},children:C}):jsxRuntime.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:C})}),f&&jsxRuntime.jsx("h2",{id:"ai-chat-title",style:{fontSize:"1.125rem",fontWeight:600,color:"#ffffff",margin:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:f})]}),jsxRuntime.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[jsxRuntime.jsx("button",{onClick:m,"aria-label":a.restart,style:{borderRadius:"50%",padding:"0.25rem",color:"rgba(255, 255, 255, 0.8)",background:"transparent",border:"none",cursor:"pointer",transition:"all 0.2s",flexShrink:0},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)",p.currentTarget.style.color="white";},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="transparent",p.currentTarget.style.color="rgba(255, 255, 255, 0.8)";},children:jsxRuntime.jsx(ze,{size:18})}),jsxRuntime.jsx("button",{onClick:c,"aria-label":a.close,style:{borderRadius:"50%",padding:"0.25rem",color:"rgba(255, 255, 255, 0.8)",background:"transparent",border:"none",cursor:"pointer",transition:"all 0.2s",flexShrink:0},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)",p.currentTarget.style.color="white";},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="transparent",p.currentTarget.style.color="rgba(255, 255, 255, 0.8)";},children:jsxRuntime.jsx($,{size:20})})]})]}),jsxRuntime.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem",backgroundColor:e.background},children:jsxRuntime.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.map((p,D)=>jsxRuntime.jsx(re,{message:p,theme:e,showSuggestions:M,isLastAssistantMessage:D===S&&!u,suggestionsTitle:a.suggestionsTitle,onSuggestionSelect:s},p.id)),u&&jsxRuntime.jsx(ne,{theme:e,text:a.thinking}),d&&jsxRuntime.jsx(se,{theme:e,errorText:a.error,retryText:a.retry,onRetry:n}),jsxRuntime.jsx("div",{ref:x})]})}),jsxRuntime.jsx(ae,{theme:e,value:o,onChange:i,onSubmit:l,placeholder:g,sendLabel:a.send,isLoading:u,autoFocus:true}),T&&!h&&jsxRuntime.jsx(xe,{onResizeStart:v,isResizing:w})]})}var Fe="ai-chat-widget-size";function ce(e,t,r){return Math.min(Math.max(e,t),r)}function Ue(){if(typeof window>"u")return null;try{let e=localStorage.getItem(Fe);if(!e)return null;let t=JSON.parse(e);if(typeof t.width=="number"&&typeof t.height=="number")return t}catch{}return null}function Ae(e){if(!(typeof window>"u"))try{localStorage.setItem(Fe,JSON.stringify(e));}catch{}}function Oe({initialWidth:e,initialHeight:t,minWidth:r,maxWidth:o,minHeight:i,maxHeight:l,enabled:n}){let[c,m]=react.useState(()=>{if(!n)return e;let g=Ue();return g?ce(g.width,r,o):e}),[s,u]=react.useState(()=>{if(!n)return t;let g=Ue();return g?ce(g.height,i,l):t}),[d,a]=react.useState(false),f=react.useRef(null),C=react.useCallback((g,y)=>{n&&(y.preventDefault(),y.stopPropagation(),f.current={corner:g,startX:y.clientX,startY:y.clientY,startWidth:c,startHeight:s},a(true),document.body.style.userSelect="none",document.body.style.cursor=g==="nw"||g==="se"?"nwse-resize":"nesw-resize");},[n,c,s]);return react.useEffect(()=>{if(!d)return;let g=R=>{if(!f.current)return;let{corner:L,startX:M,startY:I,startWidth:T,startHeight:h}=f.current,w=R.clientX-M,v=R.clientY-I,x=T,S=h;switch(L){case "se":x=T+w,S=h+v;break;case "sw":x=T-w,S=h+v;break;case "ne":x=T+w,S=h-v;break;case "nw":x=T-w,S=h-v;break}x=ce(x,r,o),S=ce(S,i,l),m(x),u(S);},y=()=>{f.current&&Ae({width:c,height:s}),f.current=null,a(false),document.body.style.userSelect="",document.body.style.cursor="";};return document.addEventListener("mousemove",g),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y);}},[d,c,s,r,o,i,l]),react.useEffect(()=>{!d&&n&&Ae({width:c,height:s});},[c,s,d,n]),{width:c,height:s,isResizing:d,handleResizeStart:C}}var Ye=640;function _e(){let[e,t]=react.useState(()=>typeof window>"u"?false:window.innerWidth<Ye);return react.useEffect(()=>{let r=window.matchMedia(`(max-width: ${Ye-1}px)`),o=i=>{t(i.matches);};return t(r.matches),r.addEventListener("change",o),()=>{r.removeEventListener("change",o);}},[]),e}var Ce=class extends react.Component{constructor(t){super(t),this.state={hasError:false,error:null};}static getDerivedStateFromError(t){return {hasError:true,error:t}}componentDidCatch(t,r){console.error("[ai-chat-widget] Error caught by boundary:",t,r);}render(){return this.state.hasError?this.props.fallback?this.props.fallback:null:this.props.children}},Nt="'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",je="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap",ve=200;function Dt({apiUrl:e,theme:t,position:r,labels:o,title:i,placeholder:l,greeting:n,defaultOpen:c,width:m,height:s,minWidth:u,maxWidth:d,minHeight:a,maxHeight:f,resizable:C,zIndex:g,lang:y,icon:R,headerIcon:L,fontFamily:M,loadDefaultFont:I,showSuggestions:T}){let[h,w]=react.useState(c),[v,x]=react.useState(c),[S,H]=react.useState(false),[z,W]=react.useState(""),[N,F]=react.useState(()=>crypto.randomUUID()),[O,p]=react.useState(!I),D=_e(),{width:de,height:Ke,isResizing:Ve,handleResizeStart:qe}=Oe({initialWidth:m,initialHeight:s,minWidth:u,maxWidth:d,minHeight:a,maxHeight:f,enabled:C&&!D});react.useEffect(()=>{if(h)x(true),H(false);else if(v){H(true);let P=setTimeout(()=>{x(false),H(false);},ve);return ()=>clearTimeout(P)}},[h,v]),react.useEffect(()=>{if(!I)return;if(document.querySelector(`link[href="${je}"]`)){p(true);return}let E=document.createElement("link");E.rel="stylesheet",E.href=je,E.onload=()=>p(true),E.onerror=()=>{console.warn("[ai-chat-widget] Failed to load Inter font, using system fonts"),p(true);},document.head.appendChild(E);},[I]);let Ge=react.useMemo(()=>new ai.DefaultChatTransport({api:e,body:{lang:y,sessionId:N}}),[e,y,N]),ue=n?[{id:"greeting",role:"assistant",parts:[{type:"text",text:n}]}]:[],{messages:Ze,sendMessage:K,regenerate:Te,setMessages:ke,status:Re,error:Je}=react$1.useChat({transport:Ge,messages:ue}),Y=Re==="streaming"||Re==="submitted",Qe=react.useCallback(()=>{ke(ue),W(""),F(crypto.randomUUID());},[ke,ue]);react.useEffect(()=>{let P=E=>{E.key==="Escape"&&h&&w(false);};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[h]);let Ie=react.useCallback(()=>w(P=>!P),[]),et=react.useCallback(()=>{!z.trim()||Y||(K({text:z}),W(""));},[z,Y,K]),tt=react.useCallback(()=>{Te();},[Te]),rt=react.useCallback(P=>{Y||K({text:P});},[Y,K]);return jsxRuntime.jsxs("div",{className:"ai-chat-widget-root",style:{fontFamily:M},children:[v&&O&&jsxRuntime.jsx(le,{theme:t,position:r,messages:Ze,input:z,onInputChange:W,onSubmit:et,onRetry:tt,onClose:Ie,onRestart:Qe,onSuggestionSelect:rt,isLoading:Y,error:Je,labels:o,title:i,headerIcon:L,placeholder:l,width:de,height:Ke,zIndex:g,showSuggestions:T,isClosing:S,resizable:C,isMobile:D,isResizing:Ve,onResizeStart:qe}),jsxRuntime.jsx(ee,{theme:t,position:r,isOpen:h,onClick:Ie,openLabel:o.open,closeLabel:o.close,zIndex:g,openIcon:R?.open,closeIcon:R?.close}),jsxRuntime.jsx("style",{children:`
        @keyframes ai-chat-bounce {
          0%, 80%, 100% { transform: translateY(0); }
          40% { transform: translateY(-6px); }
        }
        @keyframes ai-chat-window-open {
          from {
            opacity: 0;
            transform: scale(0.95) translateY(10px);
          }
          to {
            opacity: 1;
            transform: scale(1) translateY(0);
          }
        }
        @keyframes ai-chat-window-close {
          from {
            opacity: 1;
            transform: scale(1) translateY(0);
          }
          to {
            opacity: 0;
            transform: scale(0.95) translateY(10px);
          }
        }
        .ai-chat-window-opening {
          animation: ai-chat-window-open ${ve}ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
          will-change: transform, opacity;
        }
        .ai-chat-window-closing {
          animation: ai-chat-window-close ${ve}ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
          will-change: transform, opacity;
        }
        .ai-chat-markdown p { margin: 0.25rem 0; }
        .ai-chat-markdown ul, .ai-chat-markdown ol { margin: 0.25rem 0; padding-left: 1.25rem; }
        .ai-chat-markdown li { margin: 0; }
        .ai-chat-markdown strong { font-weight: 600; }
        .ai-chat-markdown a { color: ${t.primary}; text-decoration: underline; }
        .ai-chat-markdown code {
          background: ${t.surfaceHover};
          padding: 0.125rem 0.25rem;
          border-radius: 0.25rem;
          font-size: 0.875em;
        }
        .ai-chat-markdown pre {
          background: ${t.surfaceHover};
          padding: 0.75rem;
          border-radius: 0.5rem;
          overflow-x: auto;
          margin: 0.5rem 0;
        }
        .ai-chat-markdown pre code {
          background: transparent;
          padding: 0;
        }
      `})]})}function A(e,t){return e.endsWith("px")?parseInt(e,10)||t:e.endsWith("vh")?parseInt(e,10)/100*(typeof window<"u"?window.innerHeight:800)||t:e.endsWith("vw")?parseInt(e,10)/100*(typeof window<"u"?window.innerWidth:1200)||t:parseInt(e,10)||t}function Xe({apiUrl:e,theme:t,position:r="bottom-right",lang:o="en",labels:i,greeting:l,defaultOpen:n=false,title:c,placeholder:m,width:s="420px",height:u="600px",minWidth:d="300px",maxWidth:a="600px",minHeight:f="400px",maxHeight:C="80vh",resizable:g=true,zIndex:y=50,icon:R,headerIcon:L,fontFamily:M,showSuggestions:I=true}){let T=G(t),h=me(o,i),w=c===""||c===false?void 0:c??h.title,v=m??h.placeholder,x=M??Nt,S=!M,H=A(s,380),z=A(u,500),W=A(d,300),N=A(a,600),F=A(f,400),O=A(C,typeof window<"u"?window.innerHeight*.8:600);return jsxRuntime.jsx(Ce,{children:jsxRuntime.jsx(Dt,{apiUrl:e,theme:T,position:r,labels:h,title:w,placeholder:v,greeting:l,defaultOpen:n,width:H,height:z,minWidth:W,maxWidth:N,minHeight:F,maxHeight:O,resizable:g,zIndex:y,lang:o,icon:R,headerIcon:L,fontFamily:x,loadDefaultFont:S,showSuggestions:I})})}var $t=Xe;exports.ChatButton=ee;exports.ChatIcon=J;exports.ChatWidget=Xe;exports.ChatWindow=le;exports.CloseIcon=$;exports.ErrorMessage=se;exports.LoadingIndicator=ne;exports.MessageBubble=re;exports.MessageInput=ae;exports.SendIcon=Q;exports.SuggestionBox=te;exports.default=$t;exports.defaultTheme=q;exports.getLabels=Le;exports.getMessageText=he;exports.mergeLabels=me;exports.presets=V;exports.resolveTheme=G;exports.translations=Z;//# sourceMappingURL=index.cjs.map
//# sourceMappingURL=index.cjs.map