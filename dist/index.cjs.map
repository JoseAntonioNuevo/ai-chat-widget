{"version":3,"sources":["../src/themes/presets.ts","../src/themes/resolve.ts","../src/i18n/en.ts","../src/i18n/es.ts","../src/i18n/index.ts","../src/components/Icons.tsx","../src/components/ChatButton.tsx","../src/utils/messageHelpers.ts","../src/components/SuggestionBox.tsx","../src/components/MessageBubble.tsx","../src/components/LoadingIndicator.tsx","../src/components/ErrorMessage.tsx","../src/components/MessageInput.tsx","../src/hooks/useScrollToBottom.ts","../src/components/ChatWindow.tsx","../src/ChatWidget.tsx"],"names":["midnight","ocean","forest","sunset","lavender","presets","defaultTheme","isPresetName","theme","resolveTheme","preset","customConfig","adjustColor","hex","amount","color","num","r","g","b","en","es","translations","isBuiltInLang","lang","getLabels","mergeLabels","customLabels","baseLabels","ChatIcon","size","style","jsx","CloseIcon","jsxs","SendIcon","RestartIcon","ChatButton","position","isOpen","onClick","openLabel","closeLabel","zIndex","openIcon","closeIcon","buttonStyle","e","isTextPart","part","getMessageText","message","SuggestionBox","suggestions","onSelect","title","hoveredIndex","setHoveredIndex","useState","containerStyle","titleStyle","getButtonStyle","isHovered","suggestion","index","Markdown","lazy","err","children","MarkdownErrorBoundary","Component","props","MessageBubble","showSuggestions","isLastAssistantMessage","suggestionsTitle","onSuggestionSelect","remarkGfm","setRemarkGfm","messageText","isUser","useEffect","mod","bubbleStyle","Suspense","LoadingIndicator","text","dotStyle","i","ErrorMessage","errorText","retryText","onRetry","MessageInput","value","onChange","onSubmit","placeholder","sendLabel","isLoading","autoFocus","inputRef","useRef","handleSubmit","inputStyle","useScrollToBottom","deps","ref","scrollToBottom","useCallback","ChatWindow","messages","input","onInputChange","onClose","onRestart","error","labels","headerIcon","width","height","isClosing","messagesEndRef","lastAssistantMessageIndex","found","msg","idx","windowStyle","headerStyle","animationClass","ChatErrorBoundary","errorInfo","DEFAULT_FONT_FAMILY","INTER_FONT_URL","ANIMATION_DURATION","ChatWidgetInternal","apiUrl","greeting","defaultOpen","icon","fontFamily","loadDefaultFont","setIsOpen","isVisible","setIsVisible","setIsClosing","setInput","fontLoaded","setFontLoaded","timer","link","transport","DefaultChatTransport","initialMessages","sendMessage","regenerate","setMessages","status","useChat","handleRestart","handleKeyDown","toggleChat","prev","handleRetry","handleSuggestionSelect","ChatWidget","themeProp","customTitle","customPlaceholder","customFontFamily","ChatWidget_default"],"mappings":"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","file":"index.cjs","sourcesContent":["import type { ThemePreset } from './types';\n\n/**\n * Midnight - Dark indigo theme (Default)\n * A sophisticated dark theme with indigo accents\n */\nexport const midnight: ThemePreset = {\n  name: 'midnight',\n  primary: '#6366f1',\n  primaryHover: '#4f46e5',\n  background: '#0f172a',\n  surface: '#1e293b',\n  surfaceHover: '#334155',\n  text: '#f1f5f9',\n  textSecondary: '#94a3b8',\n  border: '#334155',\n  userBubble: '#6366f1',\n  userBubbleText: '#ffffff',\n  assistantBubble: '#1e293b',\n  assistantBubbleText: '#f1f5f9',\n  error: '#ef4444',\n  errorBg: '#450a0a',\n};\n\n/**\n * Ocean - Dark blue theme\n * A calming dark theme with sky blue accents\n */\nexport const ocean: ThemePreset = {\n  name: 'ocean',\n  primary: '#0ea5e9',\n  primaryHover: '#0284c7',\n  background: '#0c1222',\n  surface: '#172033',\n  surfaceHover: '#1e3a5f',\n  text: '#e0f2fe',\n  textSecondary: '#7dd3fc',\n  border: '#1e3a5f',\n  userBubble: '#0ea5e9',\n  userBubbleText: '#ffffff',\n  assistantBubble: '#172033',\n  assistantBubbleText: '#e0f2fe',\n  error: '#f87171',\n  errorBg: '#450a0a',\n};\n\n/**\n * Forest - Dark green theme\n * A nature-inspired dark theme with green accents\n */\nexport const forest: ThemePreset = {\n  name: 'forest',\n  primary: '#22c55e',\n  primaryHover: '#16a34a',\n  background: '#052e16',\n  surface: '#14532d',\n  surfaceHover: '#166534',\n  text: '#dcfce7',\n  textSecondary: '#86efac',\n  border: '#166534',\n  userBubble: '#22c55e',\n  userBubbleText: '#052e16',\n  assistantBubble: '#14532d',\n  assistantBubbleText: '#dcfce7',\n  error: '#f87171',\n  errorBg: '#450a0a',\n};\n\n/**\n * Sunset - Dark warm theme\n * A warm dark theme with orange accents\n */\nexport const sunset: ThemePreset = {\n  name: 'sunset',\n  primary: '#f97316',\n  primaryHover: '#ea580c',\n  background: '#1c1917',\n  surface: '#292524',\n  surfaceHover: '#44403c',\n  text: '#fafaf9',\n  textSecondary: '#d6d3d1',\n  border: '#44403c',\n  userBubble: '#f97316',\n  userBubbleText: '#ffffff',\n  assistantBubble: '#292524',\n  assistantBubbleText: '#fafaf9',\n  error: '#f87171',\n  errorBg: '#450a0a',\n};\n\n/**\n * Lavender - Dark purple theme\n * An elegant dark theme with purple accents\n */\nexport const lavender: ThemePreset = {\n  name: 'lavender',\n  primary: '#a855f7',\n  primaryHover: '#9333ea',\n  background: '#1a0a2e',\n  surface: '#2d1b4e',\n  surfaceHover: '#3b2d5c',\n  text: '#f3e8ff',\n  textSecondary: '#d8b4fe',\n  border: '#3b2d5c',\n  userBubble: '#a855f7',\n  userBubbleText: '#ffffff',\n  assistantBubble: '#2d1b4e',\n  assistantBubbleText: '#f3e8ff',\n  error: '#f87171',\n  errorBg: '#450a0a',\n};\n\n/**\n * All available theme presets\n */\nexport const presets = {\n  midnight,\n  ocean,\n  forest,\n  sunset,\n  lavender,\n} as const;\n\n/**\n * Default theme (midnight)\n */\nexport const defaultTheme = midnight;\n","import type { ThemeProp, ResolvedTheme, ThemeConfig, PresetThemeName } from './types';\nimport { presets, defaultTheme } from './presets';\n\n/**\n * Check if a value is a preset theme name\n */\nfunction isPresetName(theme: ThemeProp): theme is PresetThemeName {\n  return typeof theme === 'string' && theme in presets;\n}\n\n/**\n * Resolve a theme prop to a complete theme configuration\n *\n * @param theme - Preset name or custom theme config\n * @returns Fully resolved theme with all properties\n *\n * @example\n * ```ts\n * // From preset name\n * const theme = resolveTheme('ocean');\n *\n * // From partial config (inherits defaults from midnight)\n * const theme = resolveTheme({\n *   primary: '#ff0000',\n *   background: '#000000',\n *   surface: '#111111',\n *   text: '#ffffff',\n * });\n * ```\n */\nexport function resolveTheme(theme?: ThemeProp): ResolvedTheme {\n  // No theme provided - use default\n  if (!theme) {\n    return {\n      ...defaultTheme,\n      name: defaultTheme.name,\n    } as ResolvedTheme;\n  }\n\n  // Preset name provided\n  if (isPresetName(theme)) {\n    const preset = presets[theme];\n    return {\n      ...preset,\n      name: preset.name,\n    } as ResolvedTheme;\n  }\n\n  // Custom config provided - merge with defaults\n  const customConfig = theme as ThemeConfig;\n  return {\n    name: 'custom',\n    primary: customConfig.primary,\n    primaryHover: customConfig.primaryHover ?? adjustColor(customConfig.primary, -15),\n    background: customConfig.background,\n    surface: customConfig.surface,\n    surfaceHover: customConfig.surfaceHover ?? adjustColor(customConfig.surface, 10),\n    text: customConfig.text,\n    textSecondary: customConfig.textSecondary ?? adjustColor(customConfig.text, -30),\n    border: customConfig.border ?? customConfig.surface,\n    userBubble: customConfig.userBubble ?? customConfig.primary,\n    userBubbleText: customConfig.userBubbleText ?? '#ffffff',\n    assistantBubble: customConfig.assistantBubble ?? customConfig.surface,\n    assistantBubbleText: customConfig.assistantBubbleText ?? customConfig.text,\n    error: customConfig.error ?? '#ef4444',\n    errorBg: customConfig.errorBg ?? '#450a0a',\n  };\n}\n\n/**\n * Adjust a hex color's lightness\n * Positive amount = lighter, negative = darker\n */\nfunction adjustColor(hex: string, amount: number): string {\n  // Remove # if present\n  const color = hex.replace(/^#/, '');\n\n  // Parse RGB\n  const num = parseInt(color, 16);\n  let r = (num >> 16) + amount;\n  let g = ((num >> 8) & 0x00ff) + amount;\n  let b = (num & 0x0000ff) + amount;\n\n  // Clamp values\n  r = Math.max(0, Math.min(255, r));\n  g = Math.max(0, Math.min(255, g));\n  b = Math.max(0, Math.min(255, b));\n\n  // Return hex\n  return `#${((r << 16) | (g << 8) | b).toString(16).padStart(6, '0')}`;\n}\n","import type { Labels } from './types';\n\n/**\n * English translations (default)\n */\nexport const en: Labels = {\n  title: 'Chat Assistant',\n  placeholder: 'Type your message...',\n  send: 'Send message',\n  close: 'Close chat',\n  open: 'Open chat',\n  thinking: 'Thinking',\n  error: 'Something went wrong. Please try again.',\n  retry: 'Retry',\n  suggestionsTitle: 'Suggested questions',\n  restart: 'Restart chat',\n};\n","import type { Labels } from './types';\n\n/**\n * Spanish translations\n */\nexport const es: Labels = {\n  title: 'Asistente de Chat',\n  placeholder: 'Escribe tu mensaje...',\n  send: 'Enviar mensaje',\n  close: 'Cerrar chat',\n  open: 'Abrir chat',\n  thinking: 'Pensando',\n  error: 'Algo salió mal. Por favor, intenta de nuevo.',\n  retry: 'Reintentar',\n  suggestionsTitle: 'Preguntas sugeridas',\n  restart: 'Reiniciar chat',\n};\n","import type { Lang, Labels, Translations, BuiltInLang } from './types';\nimport { en } from './en';\nimport { es } from './es';\n\nexport * from './types';\n\n/**\n * Built-in translations (English and Spanish)\n * For other languages, use the `labels` prop to provide custom translations\n */\nexport const translations: Translations = {\n  en,\n  es,\n};\n\n/**\n * Check if a language has built-in translations\n */\nfunction isBuiltInLang(lang: string): lang is BuiltInLang {\n  return lang in translations;\n}\n\n/**\n * Get labels for a specific language\n *\n * @param lang - Language code (any string, e.g., 'en', 'es', 'fr', 'de', 'pt-BR')\n * @returns Labels for the specified language, or English defaults if not found\n *\n * @example\n * ```ts\n * getLabels('en');  // Returns English labels\n * getLabels('es');  // Returns Spanish labels\n * getLabels('fr');  // Returns English labels (no built-in French)\n * ```\n */\nexport function getLabels(lang: Lang): Labels {\n  if (isBuiltInLang(lang)) {\n    return translations[lang];\n  }\n  // Fallback to English for unknown languages\n  return translations.en;\n}\n\n/**\n * Merge custom labels with defaults\n *\n * @param lang - Base language code (any string)\n * @param customLabels - Partial custom labels to override\n * @returns Complete labels with overrides applied\n *\n * @example\n * ```ts\n * // French with custom labels\n * mergeLabels('fr', {\n *   title: 'Assistant',\n *   placeholder: 'Écrivez votre message...',\n *   send: 'Envoyer',\n *   close: 'Fermer',\n *   open: 'Ouvrir le chat',\n *   thinking: 'Réflexion',\n *   error: 'Une erreur est survenue',\n *   retry: 'Réessayer',\n * });\n * ```\n */\nexport function mergeLabels(lang: Lang, customLabels?: Partial<Labels>): Labels {\n  const baseLabels = getLabels(lang);\n  if (!customLabels) return baseLabels;\n  return { ...baseLabels, ...customLabels };\n}\n","import type { CSSProperties } from 'react';\n\ninterface IconProps {\n  size?: number;\n  style?: CSSProperties;\n}\n\nexport function ChatIcon({ size = 24, style }: IconProps) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={size}\n      height={size}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      style={style}\n    >\n      <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" />\n    </svg>\n  );\n}\n\nexport function CloseIcon({ size = 24, style }: IconProps) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={size}\n      height={size}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      style={style}\n    >\n      <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n      <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n    </svg>\n  );\n}\n\nexport function SendIcon({ size = 18, style }: IconProps) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={size}\n      height={size}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      style={style}\n    >\n      <line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\" />\n      <polygon points=\"22 2 15 22 11 13 2 9 22 2\" />\n    </svg>\n  );\n}\n\nexport function RestartIcon({ size = 18, style }: IconProps) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={size}\n      height={size}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      style={style}\n    >\n      <path d=\"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\" />\n      <path d=\"M3 3v5h5\" />\n    </svg>\n  );\n}\n","'use client';\n\nimport type { CSSProperties, ReactNode } from 'react';\nimport type { ResolvedTheme } from '../themes/types';\nimport type { Position } from '../types';\nimport { ChatIcon, CloseIcon } from './Icons';\n\ninterface ChatButtonProps {\n  theme: ResolvedTheme;\n  position: Position;\n  isOpen: boolean;\n  onClick: () => void;\n  openLabel: string;\n  closeLabel: string;\n  zIndex: number;\n  /** Custom icon for open state */\n  openIcon?: ReactNode;\n  /** Custom icon for close state */\n  closeIcon?: ReactNode;\n}\n\nexport function ChatButton({\n  theme,\n  position,\n  isOpen,\n  onClick,\n  openLabel,\n  closeLabel,\n  zIndex,\n  openIcon,\n  closeIcon,\n}: ChatButtonProps) {\n  const positionStyles: CSSProperties =\n    position === 'bottom-left'\n      ? { left: '1rem', right: 'auto' }\n      : { right: '1rem', left: 'auto' };\n\n  const buttonStyle: CSSProperties = {\n    position: 'fixed',\n    bottom: '1rem',\n    ...positionStyles,\n    zIndex,\n    display: 'flex',\n    height: '3.5rem',\n    width: '3.5rem',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: '50%',\n    backgroundColor: theme.primary,\n    color: '#ffffff',\n    border: 'none',\n    cursor: 'pointer',\n    boxShadow: `0 4px 20px ${theme.primary}66`,\n    transition: 'all 0.2s',\n  };\n\n  return (\n    <button\n      onClick={onClick}\n      aria-label={isOpen ? closeLabel : openLabel}\n      aria-expanded={isOpen}\n      style={buttonStyle}\n      onMouseEnter={(e) => {\n        e.currentTarget.style.transform = 'scale(1.05)';\n        e.currentTarget.style.backgroundColor = theme.primaryHover;\n        e.currentTarget.style.boxShadow = `0 6px 24px ${theme.primary}80`;\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.transform = 'scale(1)';\n        e.currentTarget.style.backgroundColor = theme.primary;\n        e.currentTarget.style.boxShadow = `0 4px 20px ${theme.primary}66`;\n      }}\n    >\n      {isOpen ? (closeIcon ?? <CloseIcon />) : (openIcon ?? <ChatIcon />)}\n    </button>\n  );\n}\n","import type { UIMessage } from 'ai';\n\n/**\n * Text part from UIMessage\n */\ninterface TextPart {\n  type: 'text';\n  text: string;\n}\n\n/**\n * Type guard for text parts\n */\nfunction isTextPart(part: unknown): part is TextPart {\n  return (\n    typeof part === 'object' &&\n    part !== null &&\n    'type' in part &&\n    (part as TextPart).type === 'text' &&\n    'text' in part &&\n    typeof (part as TextPart).text === 'string'\n  );\n}\n\n/**\n * Extract text content from a UIMessage's parts array\n *\n * @param message - UIMessage from Vercel AI SDK v6\n * @returns Combined text content from all text parts\n */\nexport function getMessageText(message: UIMessage): string {\n  if (!message.parts || message.parts.length === 0) {\n    return '';\n  }\n\n  return message.parts.filter(isTextPart).map((part) => part.text).join('');\n}\n","'use client';\n\nimport { useState, type CSSProperties } from 'react';\nimport type { ResolvedTheme } from '../themes/types';\n\ninterface SuggestionBoxProps {\n  suggestions: string[];\n  onSelect: (suggestion: string) => void;\n  theme: ResolvedTheme;\n  title: string;\n}\n\nexport function SuggestionBox({ suggestions, onSelect, theme, title }: SuggestionBoxProps) {\n  const [hoveredIndex, setHoveredIndex] = useState<number | null>(null);\n\n  if (!suggestions?.length) return null;\n\n  const containerStyle: CSSProperties = {\n    marginTop: '0.75rem',\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '0.5rem',\n  };\n\n  const titleStyle: CSSProperties = {\n    fontSize: '0.75rem',\n    color: theme.textSecondary,\n    marginBottom: '0.25rem',\n  };\n\n  const getButtonStyle = (isHovered: boolean): CSSProperties => ({\n    padding: '0.5rem 0.75rem',\n    fontSize: '0.875rem',\n    backgroundColor: isHovered ? theme.primary : theme.surface,\n    color: isHovered ? '#ffffff' : theme.text,\n    border: `1px solid ${isHovered ? theme.primary : theme.border}`,\n    borderRadius: '0.5rem',\n    cursor: 'pointer',\n    textAlign: 'left',\n    transition: 'all 0.2s',\n    fontFamily: 'inherit',\n  });\n\n  return (\n    <div style={containerStyle}>\n      <span style={titleStyle}>{title}</span>\n      {suggestions.slice(0, 3).map((suggestion, index) => (\n        <button\n          key={index}\n          type=\"button\"\n          style={getButtonStyle(hoveredIndex === index)}\n          onClick={() => onSelect(suggestion)}\n          onMouseEnter={() => setHoveredIndex(index)}\n          onMouseLeave={() => setHoveredIndex(null)}\n        >\n          {suggestion}\n        </button>\n      ))}\n    </div>\n  );\n}\n","'use client';\n\nimport { lazy, Suspense, useState, useEffect, Component, type ReactNode, type CSSProperties } from 'react';\nimport type { UIMessage } from 'ai';\nimport type { ResolvedTheme } from '../themes/types';\nimport { getMessageText } from '../utils/messageHelpers';\nimport { SuggestionBox } from './SuggestionBox';\n\n// Lazy load react-markdown\nconst Markdown = lazy(() =>\n  import('react-markdown').catch((err) => {\n    console.error('[ai-chat-widget] Failed to load react-markdown:', err);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return { default: ({ children }: any) => <span>{children}</span> } as any;\n  })\n);\n\n// Error boundary for markdown rendering\nclass MarkdownErrorBoundary extends Component<\n  { children: ReactNode; fallback: string },\n  { hasError: boolean }\n> {\n  constructor(props: { children: ReactNode; fallback: string }) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError() {\n    return { hasError: true };\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <span>{this.props.fallback}</span>;\n    }\n    return this.props.children;\n  }\n}\n\n/**\n * Suggestions data part type (AI SDK v6 format).\n * Backend sends this as: { type: 'data-suggestions', data: string[] }\n */\ninterface SuggestionsDataPart {\n  type: 'data-suggestions';\n  data: string[];\n}\n\ninterface MessageBubbleProps {\n  message: UIMessage;\n  theme: ResolvedTheme;\n  showSuggestions?: boolean;\n  isLastAssistantMessage?: boolean;\n  suggestionsTitle?: string;\n  onSuggestionSelect?: (suggestion: string) => void;\n}\n\nexport function MessageBubble({\n  message,\n  theme,\n  showSuggestions = true,\n  isLastAssistantMessage = false,\n  suggestionsTitle = 'Suggested questions',\n  onSuggestionSelect,\n}: MessageBubbleProps) {\n  const [remarkGfm, setRemarkGfm] = useState<typeof import('remark-gfm').default | null>(null);\n  const messageText = getMessageText(message);\n  const isUser = message.role === 'user';\n\n  // Lazy load remark-gfm for assistant messages\n  useEffect(() => {\n    if (!isUser && !remarkGfm) {\n      import('remark-gfm')\n        .then((mod) => {\n          setRemarkGfm(() => mod.default);\n        })\n        .catch((err) => {\n          console.error('[ai-chat-widget] Failed to load remark-gfm:', err);\n        });\n    }\n  }, [isUser, remarkGfm]);\n\n  if (!messageText) return null;\n\n  // Extract suggestions from message parts (data-suggestions type)\n  // AI SDK v6 uses { type: 'data-suggestions', data: string[] } format\n  const suggestions = !isUser && showSuggestions && isLastAssistantMessage && onSuggestionSelect\n    ? (message.parts?.find(\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (part: any): part is SuggestionsDataPart => part.type === 'data-suggestions'\n      )?.data ?? [])\n    : [];\n\n  const bubbleStyle: CSSProperties = {\n    maxWidth: '85%',\n    borderRadius: '1rem',\n    padding: '0.5rem 1rem',\n    backgroundColor: isUser ? theme.userBubble : theme.assistantBubble,\n    color: isUser ? theme.userBubbleText : theme.assistantBubbleText,\n  };\n\n  const markdownStyle: CSSProperties = {\n    fontSize: '0.875rem',\n    lineHeight: 1.5,\n  };\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: isUser ? 'flex-end' : 'flex-start',\n      }}\n    >\n      <div style={bubbleStyle}>\n        {isUser ? (\n          <p style={{ fontSize: '0.875rem', margin: 0 }}>{messageText}</p>\n        ) : (\n          <div style={markdownStyle} className=\"ai-chat-markdown\">\n            <MarkdownErrorBoundary fallback={messageText}>\n              <Suspense fallback={<span>{messageText}</span>}>\n                <Markdown remarkPlugins={remarkGfm ? [remarkGfm] : []}>\n                  {messageText}\n                </Markdown>\n              </Suspense>\n            </MarkdownErrorBoundary>\n          </div>\n        )}\n      </div>\n      {suggestions.length > 0 && onSuggestionSelect && (\n        <SuggestionBox\n          suggestions={suggestions}\n          onSelect={onSuggestionSelect}\n          theme={theme}\n          title={suggestionsTitle}\n        />\n      )}\n    </div>\n  );\n}\n","import type { CSSProperties } from 'react';\nimport type { ResolvedTheme } from '../themes/types';\n\ninterface LoadingIndicatorProps {\n  theme: ResolvedTheme;\n  text: string;\n}\n\nexport function LoadingIndicator({ theme, text }: LoadingIndicatorProps) {\n  const dotStyle: CSSProperties = {\n    height: '0.5rem',\n    width: '0.5rem',\n    borderRadius: '50%',\n    backgroundColor: theme.primary,\n  };\n\n  return (\n    <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\n      <div\n        style={{\n          borderRadius: '1rem',\n          backgroundColor: theme.assistantBubble,\n          padding: '0.5rem 1rem',\n          color: theme.assistantBubbleText,\n        }}\n      >\n        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n          <div style={{ display: 'flex', gap: '0.25rem' }}>\n            {[0, 1, 2].map((i) => (\n              <span\n                key={i}\n                style={{\n                  ...dotStyle,\n                  animation: 'ai-chat-bounce 1s infinite',\n                  animationDelay: `${-0.3 + i * 0.15}s`,\n                }}\n              />\n            ))}\n          </div>\n          <span\n            style={{\n              fontSize: '0.875rem',\n              color: theme.textSecondary,\n            }}\n          >\n            {text}...\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import type { ResolvedTheme } from '../themes/types';\n\ninterface ErrorMessageProps {\n  theme: ResolvedTheme;\n  errorText: string;\n  retryText: string;\n  onRetry: () => void;\n}\n\nexport function ErrorMessage({ theme, errorText, retryText, onRetry }: ErrorMessageProps) {\n  return (\n    <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\n      <div\n        style={{\n          borderRadius: '1rem',\n          backgroundColor: theme.errorBg,\n          padding: '0.5rem 1rem',\n          color: theme.error,\n        }}\n      >\n        <p style={{ fontSize: '0.875rem', margin: 0 }}>{errorText}</p>\n        <button\n          onClick={onRetry}\n          style={{\n            marginTop: '0.25rem',\n            fontSize: '0.875rem',\n            fontWeight: 500,\n            color: theme.error,\n            textDecoration: 'underline',\n            background: 'none',\n            border: 'none',\n            cursor: 'pointer',\n            padding: 0,\n          }}\n        >\n          {retryText}\n        </button>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useRef, useEffect, type CSSProperties } from 'react';\nimport type { ResolvedTheme } from '../themes/types';\nimport { SendIcon } from './Icons';\n\ninterface MessageInputProps {\n  theme: ResolvedTheme;\n  value: string;\n  onChange: (value: string) => void;\n  onSubmit: () => void;\n  placeholder: string;\n  sendLabel: string;\n  isLoading: boolean;\n  autoFocus?: boolean;\n}\n\nexport function MessageInput({\n  theme,\n  value,\n  onChange,\n  onSubmit,\n  placeholder,\n  sendLabel,\n  isLoading,\n  autoFocus,\n}: MessageInputProps) {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (autoFocus) {\n      inputRef.current?.focus();\n    }\n  }, [autoFocus]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!value.trim() || isLoading) return;\n    onSubmit();\n  };\n\n  const inputStyle: CSSProperties = {\n    flex: 1,\n    borderRadius: '9999px',\n    border: `1px solid ${theme.border}`,\n    backgroundColor: theme.surface,\n    padding: '0.5rem 1rem',\n    fontSize: '0.875rem',\n    color: theme.text,\n    outline: 'none',\n    transition: 'all 0.2s',\n    opacity: isLoading ? 0.5 : 1,\n  };\n\n  const buttonStyle: CSSProperties = {\n    display: 'flex',\n    height: '2.5rem',\n    width: '2.5rem',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: '50%',\n    backgroundColor: theme.primary,\n    color: '#ffffff',\n    border: 'none',\n    cursor: isLoading || !value.trim() ? 'not-allowed' : 'pointer',\n    opacity: isLoading || !value.trim() ? 0.5 : 1,\n    transition: 'all 0.2s',\n  };\n\n  return (\n    <form\n      onSubmit={handleSubmit}\n      style={{\n        borderTop: `1px solid ${theme.border}`,\n        backgroundColor: theme.surface,\n        padding: '1rem',\n      }}\n    >\n      <div style={{ display: 'flex', gap: '0.5rem' }}>\n        <input\n          ref={inputRef}\n          type=\"text\"\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n          placeholder={placeholder}\n          disabled={isLoading}\n          style={inputStyle}\n          onFocus={(e) => {\n            e.currentTarget.style.borderColor = theme.primary;\n            e.currentTarget.style.boxShadow = `0 0 0 2px ${theme.primary}33`;\n          }}\n          onBlur={(e) => {\n            e.currentTarget.style.borderColor = theme.border;\n            e.currentTarget.style.boxShadow = 'none';\n          }}\n        />\n        <button\n          type=\"submit\"\n          disabled={isLoading || !value.trim()}\n          aria-label={sendLabel}\n          style={buttonStyle}\n          onMouseEnter={(e) => {\n            if (!isLoading && value.trim()) {\n              e.currentTarget.style.backgroundColor = theme.primaryHover;\n            }\n          }}\n          onMouseLeave={(e) => {\n            e.currentTarget.style.backgroundColor = theme.primary;\n          }}\n        >\n          <SendIcon />\n        </button>\n      </div>\n    </form>\n  );\n}\n","import { useCallback, useRef, useEffect } from 'react';\n\n/**\n * Hook for auto-scrolling to bottom of a container\n *\n * @param deps - Dependencies that trigger scroll when changed\n * @returns Ref to attach to the scroll target element\n */\nexport function useScrollToBottom(deps: unknown[]) {\n  const ref = useRef<HTMLDivElement>(null);\n\n  const scrollToBottom = useCallback(() => {\n    ref.current?.scrollIntoView({ behavior: 'smooth' });\n  }, []);\n\n  useEffect(() => {\n    scrollToBottom();\n    // deps is intentionally spread - we want to react to array contents\n  }, [scrollToBottom, ...deps]);\n\n  return { ref, scrollToBottom };\n}\n","'use client';\n\nimport type { CSSProperties, ReactNode } from 'react';\nimport type { UIMessage } from 'ai';\nimport type { ResolvedTheme } from '../themes/types';\nimport type { Position, Labels } from '../types';\nimport { CloseIcon, RestartIcon } from './Icons';\nimport { MessageBubble } from './MessageBubble';\nimport { LoadingIndicator } from './LoadingIndicator';\nimport { ErrorMessage } from './ErrorMessage';\nimport { MessageInput } from './MessageInput';\nimport { useScrollToBottom } from '../hooks/useScrollToBottom';\n\ninterface ChatWindowProps {\n  theme: ResolvedTheme;\n  position: Position;\n  messages: UIMessage[];\n  input: string;\n  onInputChange: (value: string) => void;\n  onSubmit: () => void;\n  onRetry: () => void;\n  onClose: () => void;\n  onRestart: () => void;\n  onSuggestionSelect?: (suggestion: string) => void;\n  isLoading: boolean;\n  error: Error | undefined;\n  labels: Labels;\n  title?: string;\n  headerIcon?: ReactNode;\n  placeholder: string;\n  width: string;\n  height: string;\n  zIndex: number;\n  showSuggestions: boolean;\n  isClosing?: boolean;\n}\n\nexport function ChatWindow({\n  theme,\n  position,\n  messages,\n  input,\n  onInputChange,\n  onSubmit,\n  onRetry,\n  onClose,\n  onRestart,\n  onSuggestionSelect,\n  isLoading,\n  error,\n  labels,\n  title,\n  headerIcon,\n  placeholder,\n  width,\n  height,\n  zIndex,\n  showSuggestions,\n  isClosing = false,\n}: ChatWindowProps) {\n  const { ref: messagesEndRef } = useScrollToBottom([messages]);\n\n  // Find the last assistant message index for showing suggestions\n  const lastAssistantMessageIndex = messages.reduceRight(\n    (found, msg, idx) => (found === -1 && msg.role === 'assistant' ? idx : found),\n    -1\n  );\n\n  const positionStyles: CSSProperties =\n    position === 'bottom-left'\n      ? { left: '1rem', right: 'auto' }\n      : { right: '1rem', left: 'auto' };\n\n  const windowStyle: CSSProperties = {\n    position: 'fixed',\n    bottom: '6rem',\n    ...positionStyles,\n    zIndex,\n    display: 'flex',\n    height,\n    width,\n    maxWidth: 'calc(100vw - 2rem)',\n    flexDirection: 'column',\n    overflow: 'hidden',\n    borderRadius: '1rem',\n    border: `1px solid ${theme.border}`,\n    backgroundColor: theme.background,\n    boxShadow: `0 8px 32px ${theme.primary}40`,\n  };\n\n  const headerStyle: CSSProperties = {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    borderBottom: `1px solid ${theme.border}`,\n    background: `linear-gradient(to right, ${theme.primary}, ${theme.primaryHover})`,\n    padding: '0.75rem 1rem',\n  };\n\n  // Determine animation class\n  const animationClass = isClosing\n    ? 'ai-chat-window-closing'\n    : 'ai-chat-window-opening';\n\n  return (\n    <div\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby={title ? 'ai-chat-title' : undefined}\n      aria-label={!title ? labels.title : undefined}\n      className={animationClass}\n      style={windowStyle}\n    >\n      {/* Header */}\n      <div style={headerStyle}>\n        <div\n          style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            flex: 1,\n            minWidth: 0,\n          }}\n        >\n          {headerIcon && (\n            <span\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                width: '24px',\n                height: '24px',\n                flexShrink: 0,\n              }}\n            >\n              {typeof headerIcon === 'string' ? (\n                <span style={{ fontSize: '1.25rem', lineHeight: 1 }}>{headerIcon}</span>\n              ) : (\n                <span\n                  style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    width: '100%',\n                    height: '100%',\n                  }}\n                >\n                  {headerIcon}\n                </span>\n              )}\n            </span>\n          )}\n          {title && (\n            <h2\n              id=\"ai-chat-title\"\n              style={{\n                fontSize: '1.125rem',\n                fontWeight: 600,\n                color: '#ffffff',\n                margin: 0,\n                overflow: 'hidden',\n                textOverflow: 'ellipsis',\n                whiteSpace: 'nowrap',\n              }}\n            >\n              {title}\n            </h2>\n          )}\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '0.25rem' }}>\n          <button\n            onClick={onRestart}\n            aria-label={labels.restart}\n            style={{\n              borderRadius: '50%',\n              padding: '0.25rem',\n              color: 'rgba(255, 255, 255, 0.8)',\n              background: 'transparent',\n              border: 'none',\n              cursor: 'pointer',\n              transition: 'all 0.2s',\n              flexShrink: 0,\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';\n              e.currentTarget.style.color = 'white';\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.backgroundColor = 'transparent';\n              e.currentTarget.style.color = 'rgba(255, 255, 255, 0.8)';\n            }}\n          >\n            <RestartIcon size={18} />\n          </button>\n          <button\n            onClick={onClose}\n            aria-label={labels.close}\n            style={{\n              borderRadius: '50%',\n              padding: '0.25rem',\n              color: 'rgba(255, 255, 255, 0.8)',\n              background: 'transparent',\n              border: 'none',\n              cursor: 'pointer',\n              transition: 'all 0.2s',\n              flexShrink: 0,\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';\n              e.currentTarget.style.color = 'white';\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.backgroundColor = 'transparent';\n              e.currentTarget.style.color = 'rgba(255, 255, 255, 0.8)';\n            }}\n          >\n            <CloseIcon size={20} />\n          </button>\n        </div>\n      </div>\n\n      {/* Messages */}\n      <div\n        style={{\n          flex: 1,\n          overflowY: 'auto',\n          padding: '1rem',\n          backgroundColor: theme.background,\n        }}\n      >\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n          {messages.map((message, index) => (\n            <MessageBubble\n              key={message.id}\n              message={message}\n              theme={theme}\n              showSuggestions={showSuggestions}\n              isLastAssistantMessage={index === lastAssistantMessageIndex && !isLoading}\n              suggestionsTitle={labels.suggestionsTitle}\n              onSuggestionSelect={onSuggestionSelect}\n            />\n          ))}\n\n          {isLoading && (\n            <LoadingIndicator theme={theme} text={labels.thinking} />\n          )}\n\n          {error && (\n            <ErrorMessage\n              theme={theme}\n              errorText={labels.error}\n              retryText={labels.retry}\n              onRetry={onRetry}\n            />\n          )}\n\n          <div ref={messagesEndRef} />\n        </div>\n      </div>\n\n      {/* Input */}\n      <MessageInput\n        theme={theme}\n        value={input}\n        onChange={onInputChange}\n        onSubmit={onSubmit}\n        placeholder={placeholder}\n        sendLabel={labels.send}\n        isLoading={isLoading}\n        autoFocus\n      />\n    </div>\n  );\n}\n","/**\n * AI Chat Widget - A customizable chat widget for AI applications\n *\n * Features:\n * - 5 dark mode theme presets + full customization\n * - Floating button (configurable position)\n * - Expandable chat window\n * - Streaming responses with Vercel AI SDK v6\n * - Markdown rendering for responses (lazy loaded)\n * - Loading and error states\n * - Keyboard accessibility (Escape to close)\n * - i18n support (EN/ES)\n */\n\n'use client';\n\nimport { useState, useEffect, useCallback, Component, type ReactNode } from 'react';\nimport { useChat } from '@ai-sdk/react';\nimport { DefaultChatTransport } from 'ai';\nimport type { ChatWidgetProps, Position, CustomIcons } from './types';\nimport type { Labels } from './i18n/types';\nimport { resolveTheme } from './themes/resolve';\nimport { mergeLabels } from './i18n';\nimport { ChatButton } from './components/ChatButton';\nimport { ChatWindow } from './components/ChatWindow';\n\n// Error boundary to catch rendering failures\nclass ChatErrorBoundary extends Component<\n  { children: ReactNode; fallback?: ReactNode },\n  { hasError: boolean; error: Error | null }\n> {\n  constructor(props: { children: ReactNode; fallback?: ReactNode }) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: Error) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error('[ai-chat-widget] Error caught by boundary:', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n      return null;\n    }\n    return this.props.children;\n  }\n}\n\n// Default font: Inter - modern, free, open-source, optimized for screens\nconst DEFAULT_FONT_FAMILY = \"'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif\";\n\n// Google Fonts URL for Inter (weights 400, 500, 600)\nconst INTER_FONT_URL = 'https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap';\n\ninterface InternalChatWidgetProps {\n  apiUrl: string;\n  theme: ReturnType<typeof resolveTheme>;\n  position: Position;\n  labels: Labels;\n  title?: string;\n  placeholder: string;\n  greeting?: string;\n  defaultOpen: boolean;\n  width: string;\n  height: string;\n  zIndex: number;\n  lang: string;\n  icon?: CustomIcons;\n  headerIcon?: ReactNode;\n  fontFamily: string;\n  loadDefaultFont: boolean;\n  showSuggestions: boolean;\n}\n\n// Animation duration in ms\nconst ANIMATION_DURATION = 200;\n\nfunction ChatWidgetInternal({\n  apiUrl,\n  theme,\n  position,\n  labels,\n  title,\n  placeholder,\n  greeting,\n  defaultOpen,\n  width,\n  height,\n  zIndex,\n  lang,\n  icon,\n  headerIcon,\n  fontFamily,\n  loadDefaultFont,\n  showSuggestions,\n}: InternalChatWidgetProps) {\n  const [isOpen, setIsOpen] = useState(defaultOpen);\n  const [isVisible, setIsVisible] = useState(defaultOpen); // Controls DOM presence\n  const [isClosing, setIsClosing] = useState(false); // Controls close animation\n  const [input, setInput] = useState('');\n  const [fontLoaded, setFontLoaded] = useState(!loadDefaultFont);\n\n  // Handle open/close animations\n  useEffect(() => {\n    if (isOpen) {\n      // Opening: immediately show and let CSS animate\n      setIsVisible(true);\n      setIsClosing(false);\n    } else if (isVisible) {\n      // Closing: start close animation, then hide after duration\n      setIsClosing(true);\n      const timer = setTimeout(() => {\n        setIsVisible(false);\n        setIsClosing(false);\n      }, ANIMATION_DURATION);\n      return () => clearTimeout(timer);\n    }\n  }, [isOpen, isVisible]);\n\n  // Load Inter font from Google Fonts if using default font\n  useEffect(() => {\n    if (!loadDefaultFont) return;\n\n    // Check if already loaded\n    const existingLink = document.querySelector(`link[href=\"${INTER_FONT_URL}\"]`);\n    if (existingLink) {\n      setFontLoaded(true);\n      return;\n    }\n\n    // Create and append link element\n    const link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = INTER_FONT_URL;\n    link.onload = () => setFontLoaded(true);\n    link.onerror = () => {\n      console.warn('[ai-chat-widget] Failed to load Inter font, using system fonts');\n      setFontLoaded(true);\n    };\n    document.head.appendChild(link);\n  }, [loadDefaultFont]);\n\n  // Create transport with custom API endpoint\n  const transport = new DefaultChatTransport({\n    api: apiUrl,\n    body: { lang },\n  });\n\n  // Initial messages - include greeting if provided\n  const initialMessages = greeting\n    ? [\n        {\n          id: 'greeting',\n          role: 'assistant' as const,\n          parts: [{ type: 'text' as const, text: greeting }],\n        },\n      ]\n    : [];\n\n  const { messages, sendMessage, regenerate, setMessages, status, error } = useChat({\n    transport,\n    messages: initialMessages,\n  });\n\n  const isLoading = status === 'streaming' || status === 'submitted';\n\n  const handleRestart = useCallback(() => {\n    setMessages(initialMessages);\n    setInput('');\n  }, [setMessages, initialMessages]);\n\n  // Handle escape key to close\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && isOpen) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen]);\n\n  const toggleChat = useCallback(() => setIsOpen((prev) => !prev), []);\n\n  const handleSubmit = useCallback(() => {\n    if (!input.trim() || isLoading) return;\n    sendMessage({ text: input });\n    setInput('');\n  }, [input, isLoading, sendMessage]);\n\n  const handleRetry = useCallback(() => {\n    regenerate();\n  }, [regenerate]);\n\n  const handleSuggestionSelect = useCallback((suggestion: string) => {\n    if (isLoading) return;\n    sendMessage({ text: suggestion });\n  }, [isLoading, sendMessage]);\n\n  return (\n    <div className=\"ai-chat-widget-root\" style={{ fontFamily }}>\n      {/* Chat Window */}\n      {isVisible && fontLoaded && (\n        <ChatWindow\n          theme={theme}\n          position={position}\n          messages={messages}\n          input={input}\n          onInputChange={setInput}\n          onSubmit={handleSubmit}\n          onRetry={handleRetry}\n          onClose={toggleChat}\n          onRestart={handleRestart}\n          onSuggestionSelect={handleSuggestionSelect}\n          isLoading={isLoading}\n          error={error}\n          labels={labels}\n          title={title}\n          headerIcon={headerIcon}\n          placeholder={placeholder}\n          width={width}\n          height={height}\n          zIndex={zIndex}\n          showSuggestions={showSuggestions}\n          isClosing={isClosing}\n        />\n      )}\n\n      {/* Floating Toggle Button */}\n      <ChatButton\n        theme={theme}\n        position={position}\n        isOpen={isOpen}\n        onClick={toggleChat}\n        openLabel={labels.open}\n        closeLabel={labels.close}\n        zIndex={zIndex}\n        openIcon={icon?.open}\n        closeIcon={icon?.close}\n      />\n\n      {/* CSS animations and markdown styles */}\n      <style>{`\n        @keyframes ai-chat-bounce {\n          0%, 80%, 100% { transform: translateY(0); }\n          40% { transform: translateY(-6px); }\n        }\n        @keyframes ai-chat-window-open {\n          from {\n            opacity: 0;\n            transform: scale(0.95) translateY(10px);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1) translateY(0);\n          }\n        }\n        @keyframes ai-chat-window-close {\n          from {\n            opacity: 1;\n            transform: scale(1) translateY(0);\n          }\n          to {\n            opacity: 0;\n            transform: scale(0.95) translateY(10px);\n          }\n        }\n        .ai-chat-window-opening {\n          animation: ai-chat-window-open ${ANIMATION_DURATION}ms cubic-bezier(0.16, 1, 0.3, 1) forwards;\n          will-change: transform, opacity;\n        }\n        .ai-chat-window-closing {\n          animation: ai-chat-window-close ${ANIMATION_DURATION}ms cubic-bezier(0.16, 1, 0.3, 1) forwards;\n          will-change: transform, opacity;\n        }\n        .ai-chat-markdown p { margin: 0.25rem 0; }\n        .ai-chat-markdown ul, .ai-chat-markdown ol { margin: 0.25rem 0; padding-left: 1.25rem; }\n        .ai-chat-markdown li { margin: 0; }\n        .ai-chat-markdown strong { font-weight: 600; }\n        .ai-chat-markdown a { color: ${theme.primary}; text-decoration: underline; }\n        .ai-chat-markdown code {\n          background: ${theme.surfaceHover};\n          padding: 0.125rem 0.25rem;\n          border-radius: 0.25rem;\n          font-size: 0.875em;\n        }\n        .ai-chat-markdown pre {\n          background: ${theme.surfaceHover};\n          padding: 0.75rem;\n          border-radius: 0.5rem;\n          overflow-x: auto;\n          margin: 0.5rem 0;\n        }\n        .ai-chat-markdown pre code {\n          background: transparent;\n          padding: 0;\n        }\n      `}</style>\n    </div>\n  );\n}\n\n/**\n * AI Chat Widget\n *\n * A ready-to-use, customizable floating chat widget for AI applications.\n * Works with any backend that implements the Vercel AI SDK v6 streaming protocol.\n *\n * @example Basic usage\n * ```tsx\n * import { ChatWidget } from '@joseantonionuevo/ai-chat-widget';\n *\n * function App() {\n *   return <ChatWidget apiUrl=\"/api/chat\" />;\n * }\n * ```\n *\n * @example With theme preset\n * ```tsx\n * <ChatWidget\n *   apiUrl=\"/api/chat\"\n *   theme=\"ocean\"\n *   lang=\"es\"\n *   greeting=\"¡Hola! ¿En qué puedo ayudarte?\"\n * />\n * ```\n *\n * @example With custom theme\n * ```tsx\n * <ChatWidget\n *   apiUrl=\"/api/chat\"\n *   theme={{\n *     primary: '#7bc7c1',\n *     background: '#ffffff',\n *     surface: '#f5f5f5',\n *     text: '#333333',\n *   }}\n *   title=\"Support Chat\"\n * />\n * ```\n */\nexport function ChatWidget({\n  apiUrl,\n  theme: themeProp,\n  position = 'bottom-right',\n  lang = 'en',\n  labels: customLabels,\n  greeting,\n  defaultOpen = false,\n  title: customTitle,\n  placeholder: customPlaceholder,\n  width = '380px',\n  height = '500px',\n  zIndex = 50,\n  icon,\n  headerIcon,\n  fontFamily: customFontFamily,\n  showSuggestions = true,\n}: ChatWidgetProps) {\n  const theme = resolveTheme(themeProp);\n  const labels = mergeLabels(lang, customLabels);\n  // Title: if explicitly set to '' or false, hide it; otherwise use custom or labels default\n  const title = customTitle === '' || customTitle === false\n    ? undefined\n    : (customTitle ?? labels.title);\n  const placeholder = customPlaceholder ?? labels.placeholder;\n\n  // Use custom font if provided, otherwise use Inter (default)\n  const fontFamily = customFontFamily ?? DEFAULT_FONT_FAMILY;\n  const loadDefaultFont = !customFontFamily; // Only load Inter if no custom font\n\n  return (\n    <ChatErrorBoundary>\n      <ChatWidgetInternal\n        apiUrl={apiUrl}\n        theme={theme}\n        position={position}\n        labels={labels}\n        title={title}\n        placeholder={placeholder}\n        greeting={greeting}\n        defaultOpen={defaultOpen}\n        width={width}\n        height={height}\n        zIndex={zIndex}\n        lang={lang}\n        icon={icon}\n        headerIcon={headerIcon}\n        fontFamily={fontFamily}\n        loadDefaultFont={loadDefaultFont}\n        showSuggestions={showSuggestions}\n      />\n    </ChatErrorBoundary>\n  );\n}\n\nexport default ChatWidget;\n"]}